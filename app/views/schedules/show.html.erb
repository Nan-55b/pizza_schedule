<div class="container pt-5">
  <h1><%= @schedule.title %></h1>

  <div class="row mb-3">
    <div class="col-lg-8 offset-lg-2">
      <article class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-3">
              <div class="schedule-chart">
                <%= render_schedule_chart(@tasks) %> <!-- ヘルパーを使用 -->
              </div>
            </div>
            <div class="col-md-9">
              <h3 style="display: inline;"><%= @schedule.title %></h3>
              <ul class="list-inline">
                <li class="list-inline-item"><%= "by #{@schedule.user.name}" %></li>
                <li class="list-inline-item"><%= l @schedule.created_at, format: :long %></li>
              </ul>
              <% if current_user.own?(@schedule) %>
                <div class="d-flex justify-content-end">
                  <%= link_to edit_schedule_path(@schedule), class: "btn btn-warning btn-sm me-2" do %>
                    <i class="bi bi-pencil-fill"></i> 編集
                  <% end %>
                  <%= form_with model: @schedule, method: :delete, local: true do |form| %>
                    <%= form.submit "削除", class: "btn btn-danger btn-sm", data: { confirm: "本当に削除しますか？" } %>
                  <% end %>
                </div>
              <% end %>
            </div>
          </div>
          <p><%= simple_format(@schedule.body) %></p>
        </div>
      </article>
    </div>
  </div>

  <!-- タスク追加フォーム -->
  <%= render 'tasks/form', task: @task, schedule: @schedule %>

  <!-- タスク一覧 -->
  <div class="row">
    <div class="col-lg-8 offset-lg-2">
      <% @tasks.each do |task| %>
        <%= render 'tasks/task', task: task %>
      <% end %>
    </div>
  </div>
</div>
